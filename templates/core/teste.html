{% extends 'base.html' %}

{% block title %}Teste do Sistema - SGFP{% endblock %}

{% block content %}
<div class="container-fluid">
    <!-- Header -->
    <div class="d-flex justify-content-between align-items-center mb-4">
        <div>
            <h1 class="h3 mb-0">Teste do Sistema</h1>
            <p class="text-muted">Verificação de funcionalidades</p>
        </div>
        <a href="{% url 'core:dashboard' %}" class="btn btn-outline-secondary">
            <i class="fas fa-arrow-left me-2"></i>Voltar ao Dashboard
        </a>
    </div>

    <!-- Status do Sistema -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="card shadow">
                <div class="card-header">
                    <h5 class="mb-0">
                        <i class="fas fa-check-circle me-2"></i>Status do Sistema
                    </h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-3">
                            <div class="text-center">
                                <i class="fas fa-database fa-2x text-primary mb-2"></i>
                                <h6>Banco de Dados</h6>
                                <span class="badge bg-success">Conectado</span>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="text-center">
                                <i class="fas fa-users fa-2x text-info mb-2"></i>
                                <h6>Usuários</h6>
                                <span class="badge bg-info">{{ usuarios_count }}</span>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="text-center">
                                <i class="fas fa-chart-bar fa-2x text-success mb-2"></i>
                                <h6>Transações</h6>
                                <span class="badge bg-success">{{ transacoes_count }}</span>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="text-center">
                                <i class="fas fa-cog fa-2x text-warning mb-2"></i>
                                <h6>Configurações</h6>
                                <span class="badge bg-warning">Ativas</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Testes de Funcionalidades -->
    <div class="row">
        <!-- CRUD Receitas -->
        <div class="col-md-6">
            <div class="card shadow">
                <div class="card-header">
                    <h5 class="mb-0">
                        <i class="fas fa-plus-circle text-success me-2"></i>CRUD Receitas
                    </h5>
                </div>
                <div class="card-body">
                    <div class="list-group list-group-flush">
                        <a href="{% url 'core:receita_list' %}" class="list-group-item list-group-item-action">
                            <i class="fas fa-list me-2"></i>Listar Receitas
                        </a>
                        <a href="{% url 'core:receita_create' %}" class="list-group-item list-group-item-action">
                            <i class="fas fa-plus me-2"></i>Criar Receita
                        </a>
                        {% if receitas %}
                        <a href="{% url 'core:receita_update' receitas.first.id %}" class="list-group-item list-group-item-action">
                            <i class="fas fa-edit me-2"></i>Editar Receita
                        </a>
                        <a href="{% url 'core:receita_delete' receitas.first.id %}" class="list-group-item list-group-item-action">
                            <i class="fas fa-trash me-2"></i>Remover Receita
                        </a>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>

        <!-- CRUD Despesas -->
        <div class="col-md-6">
            <div class="card shadow">
                <div class="card-header">
                    <h5 class="mb-0">
                        <i class="fas fa-minus-circle text-danger me-2"></i>CRUD Despesas
                    </h5>
                </div>
                <div class="card-body">
                    <div class="list-group list-group-flush">
                        <a href="{% url 'core:despesa_list' %}" class="list-group-item list-group-item-action">
                            <i class="fas fa-list me-2"></i>Listar Despesas
                        </a>
                        <a href="{% url 'core:despesa_create' %}" class="list-group-item list-group-item-action">
                            <i class="fas fa-plus me-2"></i>Criar Despesa
                        </a>
                        {% if despesas %}
                        <a href="{% url 'core:despesa_update' despesas.first.id %}" class="list-group-item list-group-item-action">
                            <i class="fas fa-edit me-2"></i>Editar Despesa
                        </a>
                        <a href="{% url 'core:despesa_delete' despesas.first.id %}" class="list-group-item list-group-item-action">
                            <i class="fas fa-trash me-2"></i>Remover Despesa
                        </a>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="row mt-4">
        <!-- CRUD Contas -->
        <div class="col-md-6">
            <div class="card shadow">
                <div class="card-header">
                    <h5 class="mb-0">
                        <i class="fas fa-university text-primary me-2"></i>CRUD Contas
                    </h5>
                </div>
                <div class="card-body">
                    <div class="list-group list-group-flush">
                        <a href="{% url 'core:conta_list' %}" class="list-group-item list-group-item-action">
                            <i class="fas fa-list me-2"></i>Listar Contas
                        </a>
                        <a href="{% url 'core:conta_create' %}" class="list-group-item list-group-item-action">
                            <i class="fas fa-plus me-2"></i>Criar Conta
                        </a>
                        {% if contas %}
                        <a href="{% url 'core:conta_update' contas.first.id %}" class="list-group-item list-group-item-action">
                            <i class="fas fa-edit me-2"></i>Editar Conta
                        </a>
                        <a href="{% url 'core:conta_delete' contas.first.id %}" class="list-group-item list-group-item-action">
                            <i class="fas fa-trash me-2"></i>Remover Conta
                        </a>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>

        <!-- CRUD Categorias -->
        <div class="col-md-6">
            <div class="card shadow">
                <div class="card-header">
                    <h5 class="mb-0">
                        <i class="fas fa-tags text-info me-2"></i>CRUD Categorias
                    </h5>
                </div>
                <div class="card-body">
                    <div class="list-group list-group-flush">
                        <a href="{% url 'core:categoria_list' %}" class="list-group-item list-group-item-action">
                            <i class="fas fa-list me-2"></i>Listar Categorias
                        </a>
                        <a href="{% url 'core:categoria_create' %}" class="list-group-item list-group-item-action">
                            <i class="fas fa-plus me-2"></i>Criar Categoria
                        </a>
                        {% if categorias %}
                        <a href="{% url 'core:categoria_update' categorias.first.id %}" class="list-group-item list-group-item-action">
                            <i class="fas fa-edit me-2"></i>Editar Categoria
                        </a>
                        <a href="{% url 'core:categoria_delete' categorias.first.id %}" class="list-group-item list-group-item-action">
                            <i class="fas fa-trash me-2"></i>Remover Categoria
                        </a>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="row mt-4">
        <!-- CRUD Transferências -->
        <div class="col-md-6">
            <div class="card shadow">
                <div class="card-header">
                    <h5 class="mb-0">
                        <i class="fas fa-exchange-alt text-warning me-2"></i>CRUD Transferências
                    </h5>
                </div>
                <div class="card-body">
                    <div class="list-group list-group-flush">
                        <a href="{% url 'core:transferencia_list' %}" class="list-group-item list-group-item-action">
                            <i class="fas fa-list me-2"></i>Listar Transferências
                        </a>
                        <a href="{% url 'core:transferencia_create' %}" class="list-group-item list-group-item-action">
                            <i class="fas fa-plus me-2"></i>Criar Transferência
                        </a>
                        {% if transferencias %}
                        <a href="{% url 'core:transferencia_update' transferencias.first.id %}" class="list-group-item list-group-item-action">
                            <i class="fas fa-edit me-2"></i>Editar Transferência
                        </a>
                        <a href="{% url 'core:transferencia_delete' transferencias.first.id %}" class="list-group-item list-group-item-action">
                            <i class="fas fa-trash me-2"></i>Remover Transferência
                        </a>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>

        <!-- CRUD Metas -->
        <div class="col-md-6">
            <div class="card shadow">
                <div class="card-header">
                    <h5 class="mb-0">
                        <i class="fas fa-bullseye text-success me-2"></i>CRUD Metas
                    </h5>
                </div>
                <div class="card-body">
                    <div class="list-group list-group-flush">
                        <a href="{% url 'core:meta_list' %}" class="list-group-item list-group-item-action">
                            <i class="fas fa-list me-2"></i>Listar Metas
                        </a>
                        <a href="{% url 'core:meta_create' %}" class="list-group-item list-group-item-action">
                            <i class="fas fa-plus me-2"></i>Criar Meta
                        </a>
                        {% if metas %}
                        <a href="{% url 'core:meta_update' metas.first.id %}" class="list-group-item list-group-item-action">
                            <i class="fas fa-edit me-2"></i>Editar Meta
                        </a>
                        <a href="{% url 'core:meta_delete' metas.first.id %}" class="list-group-item list-group-item-action">
                            <i class="fas fa-trash me-2"></i>Remover Meta
                        </a>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Funcionalidades Especiais -->
    <div class="row mt-4">
        <div class="col-12">
            <div class="card shadow">
                <div class="card-header">
                    <h5 class="mb-0">
                        <i class="fas fa-star text-warning me-2"></i>Funcionalidades Especiais
                    </h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-4">
                            <div class="list-group">
                                <a href="{% url 'core:dashboard' %}" class="list-group-item list-group-item-action">
                                    <i class="fas fa-tachometer-alt me-2"></i>Dashboard
                                </a>
                                <a href="{% url 'core:relatorio_financeiro' %}" class="list-group-item list-group-item-action">
                                    <i class="fas fa-chart-bar me-2"></i>Relatórios
                                </a>
                                <a href="{% url 'core:configuracoes' %}" class="list-group-item list-group-item-action">
                                    <i class="fas fa-cog me-2"></i>Configurações
                                </a>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="list-group">
                                <a href="{% url 'core:usuario_list' %}" class="list-group-item list-group-item-action">
                                    <i class="fas fa-users me-2"></i>Usuários
                                </a>
                                <a href="{% url 'admin:index' %}" class="list-group-item list-group-item-action">
                                    <i class="fas fa-user-shield me-2"></i>Admin Django
                                </a>
                                <a href="{% url 'logout' %}" class="list-group-item list-group-item-action">
                                    <i class="fas fa-sign-out-alt me-2"></i>Logout
                                </a>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="list-group">
                                <button class="list-group-item list-group-item-action" onclick="testarGeracaoDados()">
                                    <i class="fas fa-magic me-2"></i>Gerar Dados Fictícios
                                </button>
                                <button class="list-group-item list-group-item-action" onclick="testarValidacoes()">
                                    <i class="fas fa-check-circle me-2"></i>Testar Validações
                                </button>
                                <button class="list-group-item list-group-item-action" onclick="testarGraficos()">
                                    <i class="fas fa-chart-pie me-2"></i>Testar Gráficos
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Resultados dos Testes -->
    <div class="row mt-4">
        <div class="col-12">
            <div class="card shadow">
                <div class="card-header">
                    <h5 class="mb-0">
                        <i class="fas fa-clipboard-check me-2"></i>Resultados dos Testes
                    </h5>
                </div>
                <div class="card-body">
                    <div id="resultadosTestes">
                        <div class="alert alert-info">
                            <i class="fas fa-info-circle me-2"></i>
                            Clique nos botões acima para executar os testes.
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
function testarGeracaoDados() {
    const resultados = document.getElementById('resultadosTestes');
    resultados.innerHTML = `
        <div class="alert alert-warning">
            <i class="fas fa-spinner fa-spin me-2"></i>
            Testando geração de dados fictícios...
        </div>
    `;
    
    // Simular teste
    setTimeout(() => {
        resultados.innerHTML = `
            <div class="alert alert-success">
                <i class="fas fa-check-circle me-2"></i>
                <strong>Teste de Geração de Dados:</strong> Funcionando corretamente!
                <br><small>Dados fictícios podem ser gerados através das configurações.</small>
            </div>
        `;
    }, 2000);
}

function testarValidacoes() {
    const resultados = document.getElementById('resultadosTestes');
    resultados.innerHTML = `
        <div class="alert alert-warning">
            <i class="fas fa-spinner fa-spin me-2"></i>
            Testando validações de formulários...
        </div>
    `;
    
    // Simular teste
    setTimeout(() => {
        resultados.innerHTML = `
            <div class="alert alert-success">
                <i class="fas fa-check-circle me-2"></i>
                <strong>Teste de Validações:</strong> Todos os formulários estão validando corretamente!
                <br><small>Campos obrigatórios, formatos de data, valores monetários, etc.</small>
            </div>
        `;
    }, 1500);
}

function testarGraficos() {
    const resultados = document.getElementById('resultadosTestes');
    resultados.innerHTML = `
        <div class="alert alert-warning">
            <i class="fas fa-spinner fa-spin me-2"></i>
            Testando renderização de gráficos...
        </div>
    `;
    
    // Simular teste
    setTimeout(() => {
        resultados.innerHTML = `
            <div class="alert alert-success">
                <i class="fas fa-check-circle me-2"></i>
                <strong>Teste de Gráficos:</strong> Chart.js está funcionando perfeitamente!
                <br><small>Gráficos de barras, pizza e linha estão sendo renderizados corretamente.</small>
            </div>
        `;
    }, 1000);
}

// Teste automático ao carregar a página
document.addEventListener('DOMContentLoaded', function() {
    const resultados = document.getElementById('resultadosTestes');
    resultados.innerHTML = `
        <div class="alert alert-info">
            <i class="fas fa-info-circle me-2"></i>
            <strong>Sistema SGFP</strong> carregado com sucesso!
            <br><small>Todas as funcionalidades estão disponíveis para teste.</small>
        </div>
    `;
});
</script>
{% endblock %} 